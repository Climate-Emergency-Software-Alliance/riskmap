<template>
  <require from="leaflet/leaflet.css"></require>
  <require from="./map.css"></require>
  <require from="../../components/report-info/report-info"></require>
  <require from="../../components/watch-card/watch-card"></require>
  <!-- Use to test twitter cards, https://cards-dev.twitter.com/validator
  Binding metatags with view-model works -->
  <meta name="twitter-card" content="summary_large_image">
  <meta property="og:title" content="Flood report">
  <meta property="og:url" content="http://dev.petabencana.id/&23/map/jakarta/${layers.popupContent.pkey}">
  <meta property="og:image" content.bind="layers.popupContent.image_url">
  <meta property="og:description" content.bind="layers.popupContent.text">

  <div id="pageWrapper">
    <div id="mapContainer">
    </div>

    <div id="topBar">
      <div id="logos">
        <a href="https://dev.petabencana.id"><img src="assets/graphics/Peta_logo.svg"></a>
      </div>
      <div id="optionsBtn" click.delegate="openWatch()">
        <img id="optionImg" src="assets/icons/options.svg">
      </div>
    </div>

    <div id="bottomBar">
      <div id="logos_bottom">
        <a href="http://urbanrisklab.org"><img id="mitLogo" src="assets/graphics/URL_logo.svg"></a>
      </div>
      <div id="links">
        <div class="cityLinks" repeat.for="city_region of city_regions" textcontent.bind="city_region" click.delegate="changeCity(city_region)">
        </div>
      </div>
    </div>

    <div id="reportPane">
      <div class="closeBtn" click.delegate="togglePane('close', '#reportPane')">&times;
      </div>
      <report-info id="preview" if.bind="layers.popupContent.pkey" pkey.bind="layers.popupContent.pkey" city.bind="city_name" imageurl.bind="layers.popupContent.image_url" height.bind="layers.popupContent.report_data" title.bind="layers.popupContent.title" text.bind="layers.popupContent.text">
      </report-info>
    </div>

    <div id="watchPane">
      <div class="closeBtn" click.delegate="togglePane('close', '#watchPane')">&times;
      </div>
      <watch-card>
      </watch-card>
    </div>
  </div>
</template>
